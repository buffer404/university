* C:\users\leonid\Desktop\university\year3\Digital circuitry\lab1\BCD_2_BIN_test.asc
VDD1 VDD 0 1
XX1 N008 N007 N006 N005 N004 N003 N002 N001 N010 N011 N013 N015 N016 N014 N012 N009 VDD bcd_2_bin
R1 N010 0 100k
R2 N011 0 100k
R3 N013 0 100k
R4 N015 0 100k
R5 N016 0 100k
R6 N014 0 100k
R7 N012 0 100k
R8 N009 0 100k
C1 N010 0 100f
C2 N011 0 100f
C3 N013 0 100f
C4 N015 0 100f
C5 N016 0 100f
C6 N014 0 100f
C7 N012 0 100f
C8 N009 0 100f
V1 N008 0 1
V2 N007 0 0
V3 N006 0 1
V4 N005 0 0
V5 N004 0 1
V6 N003 0 1
V7 N002 0 1
V8 N001 0 PULSE(1 0 1n 10p 10p 4n 8n)

* block symbol definitions
.subckt bcd_2_bin X1 X2 X3 X4 X5 X6 X7 X8 Y1 Y2 Y3 Y4 Y5 Y6 Y7 Y8 VDD
XX1 X5 X4 X3 X2 N001 N002 N003 Y2 VDD func_block
XX2 X6 N001 N002 N003 N004 N005 N006 Y3 VDD func_block
XX3 X7 N004 N005 N006 N007 N008 N009 Y4 VDD func_block
XX4 X8 N007 N008 N009 Y8 Y7 Y6 Y5 VDD func_block
A§buffer404 X1 0 0 0 0 0 Y1 0 BUF
.ends bcd_2_bin

.subckt func_block X4 X3 X2 X1 Y4 Y3 Y2 Y1 VDD
XX1 X1 N001 VDD N002 Y1 VDD adder
XX2 X2 N001 N002 N003 Y2 VDD adder
XX3 X3 VDD N003 N004 Y3 VDD adder
XX4 X4 VDD N004 NC_01 Y4 VDD adder
XX5 0 X4 N001 VDD nor
.ends func_block

.subckt adder A B CIN COUT S VDD
XX1 A B N001 VDD nor
XX2 A N001 N003 VDD nor
XX3 N001 B N005 VDD nor
XX4 N003 N005 N004 VDD nor
XX5 N004 CIN N002 VDD nor
XX6 N004 N002 N006 VDD nor
XX7 N002 CIN N007 VDD nor
XX8 N006 N007 S VDD nor
XX9 N001 N002 COUT VDD nor
.ends adder

.subckt nor A B VOUT VDD
M1 VOUT B 0 0 NMOS l=90n w=200n
M2 VOUT A 0 0 NMOS l=90n w=200n
M3 VDD B N001 NC_01 PMOS l=90n w=400n
M4 N001 A VOUT NC_02 PMOS l=90n w=400n
.ends nor

.model NMOS NMOS
.model PMOS PMOS
.lib C:\users\leonid\Local Settings\Application Data\LTspice\lib\cmp\standard.mos
.include 90nm_bulk.txt
.tran 0 20n 0 1p
.backanno
.end
